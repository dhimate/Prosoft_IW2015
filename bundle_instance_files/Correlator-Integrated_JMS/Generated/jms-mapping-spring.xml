<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" 
	   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	   xmlns:jms="http://www.apama.com/schema/correlator-jms"
	   xsi:schemaLocation="
		   http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
		   http://www.apama.com/schema/correlator-jms http://www.apama.com/schema/correlator-jms.xsd">
		
	<!-- This file is usually auto-generated by tooling -->
	
	<bean id="progressAdaptersMapper" class="com.apama.correlator.jms.config.AdaptersMessageMapper" autowire="byType">
		<property name="eventTypeDefinitions">
			<value>
			<![CDATA[<event name="HelloWorld" package="com.prosoftgroup.klgame">
    <member name="message" type="string"/>
  </event>
  <event name="IWCustomer" package="com.prosoftgroup.klgame">
    <member name="iwcustomer" type="string"/>
    <member name="destination" type="string"/>
  </event>
  <event name="IWRegion" package="com.prosoftgroup.klgame">
    <member name="iwregion" type="string"/>
    <member name="destination" type="string"/>
  </event>
  <event name="IWStatus" package="com.prosoftgroup.klgame">
    <member name="iwstatus" type="string"/>
    <member name="destination" type="string"/>
  </event>
  <event name="UserObject" package="com.prosoftgroup.klgame">
    <member name="userId" type="string"/>
    <member name="name" type="string"/>
    <member name="beaconId" type="string"/>
    <member name="regionLabel" type="string"/>
    <member name="timestamp" type="string"/>
    <member name="eventType" type="string"/>
  </event>]]>
			</value>
		</property>

		<property name="mappingRules">
			<value>
			<![CDATA[<mapping:messageMapping xmlns:mapping="http://www.progress.com/caf/mapping1.0" xmlns:metadata="http://www.progress.com/caf/mapping1.0/toolingMetadata" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<condition xmlns="http://www.progress.com/1PAdapters/conditional/1.0" expression="${apamaEventType.name=='com.prosoftgroup.klgame.HelloWorld'}">
<mapping:mapInput>
    <mapping:property name="eventType" value="com.prosoftgroup.klgame.HelloWorld"/>
    <mapping:rule action="None" resource="" source="${apamaEvent['message']}" target="${jms.body.textmessage}" type="BINDING_PARAM"/>
    <mapping:rule action="None" resource="" source="topic:ProsoftHello" target="${jms.header['JMSDestination']}" type="BINDING_PARAM"/>
  </mapping:mapInput>
</condition>
<condition xmlns="http://www.progress.com/1PAdapters/conditional/1.0" expression="${apamaEventType.name=='com.prosoftgroup.klgame.IWStatus'}">
<mapping:mapInput>
    <mapping:property name="eventType" value="com.prosoftgroup.klgame.IWStatus"/>
    <mapping:rule action="None" source="${apamaEvent['iwstatus']}" target="${jms.body.textmessage}" type="BINDING_PARAM"/>
    <mapping:rule action="None" resource="" source="${apamaEvent['destination']}" target="${jms.header['JMSDestination']}" type="BINDING_PARAM"/>
  </mapping:mapInput>
</condition>
<condition xmlns="http://www.progress.com/1PAdapters/conditional/1.0" expression="${apamaEventType.name=='com.prosoftgroup.klgame.IWCustomer'}">
<mapping:mapInput>
    <mapping:property name="eventType" value="com.prosoftgroup.klgame.IWCustomer"/>
    <mapping:rule action="None" source="${apamaEvent['iwcustomer']}" target="${jms.body.textmessage}" type="BINDING_PARAM"/>
    <mapping:rule action="None" resource="" source="${apamaEvent['destination']}" target="${jms.header['JMSDestination']}" type="BINDING_PARAM"/>
  </mapping:mapInput>
</condition>
<condition xmlns="http://www.progress.com/1PAdapters/conditional/1.0" expression="${apamaEventType.name=='com.prosoftgroup.klgame.IWRegion'}">
<mapping:mapInput>
    <mapping:property name="eventType" value="com.prosoftgroup.klgame.IWRegion"/>
    <mapping:rule action="None" source="${apamaEvent['iwregion']}" target="${jms.body.textmessage}" type="BINDING_PARAM"/>
    <mapping:rule action="None" resource="" source="${apamaEvent['destination']}" target="${jms.header['JMSDestination']}" type="BINDING_PARAM"/>
  </mapping:mapInput>
</condition>
<condition xmlns="http://www.progress.com/1PAdapters/conditional/1.0" expression="${jms.header['JMSDestination']=='topic:InnovationWorld'}">
<mapping:mapOutput>
    <mapping:property name="eventType" value="com.prosoftgroup.klgame.UserObject"/>
    <mapping:rule action="None" source="${xpath(jms.body.bytesmessage,'//user_id/text()')}" target="${apamaEvent['userId']}" type="BINDING_PARAM"/>
    <mapping:rule action="None" source="${xpath(jms.body.bytesmessage,'//name/text()')}" target="${apamaEvent['name']}" type="BINDING_PARAM"/>
    <mapping:rule action="None" source="${xpath(jms.body.bytesmessage,'//beacon_id/text()')}" target="${apamaEvent['beaconId']}" type="BINDING_PARAM"/>
    <mapping:rule action="None" source="${xpath(jms.body.bytesmessage,'//region_label/text()')}" target="${apamaEvent['regionLabel']}" type="BINDING_PARAM"/>
    <mapping:rule action="None" source="${xpath(jms.body.bytesmessage,'//timestamp/text()')}" target="${apamaEvent['timestamp']}" type="BINDING_PARAM"/>
    <mapping:rule action="None" resource="" source="${xpath(jms.body.bytesmessage,'//event/text()')}" target="${apamaEvent['eventType']}" type="BINDING_PARAM"/>
  </mapping:mapOutput>
</condition>
</mapping:messageMapping>]]>
			</value>
		</property>

	</bean>
</beans>